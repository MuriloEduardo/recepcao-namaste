!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=0)}([function(e,t,a){a(1),e.exports=a(3)},function(e,t,a){a(2),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var n="#create-customer-modal",r=$("#edit-event-modal"),o='select.select2[name="event_belongstomany_customer_relationship[]"]';function s(){$(o).select2({placeholder:"Quais clientes participaram?",allowClear:!0,ajax:{url:"/admin/clientes",dataType:"json",data:function(e){return{page:e.page||1,s:e.term,key:"name",filter:"contains"}},processResults:function(e){return{results:$.map(e.data,function(e){return{text:e.name,id:e.id}}),pagination:{more:!0}}}},language:{noResults:function(){var e=$(".form-group.clientes input.select2-search__field").val();return'<div id="newNoResults">\n                            <div class="noResults">Nenhum resultado encontrado</div>\n                            <div class="createNew">\n                                <a href="'+n+'" class="btn btn-primary form-control" data-keyboard="true" data-customer-name="'+e+'" data-toggle="modal" data-backdrop="false" data-target="'+n+'">Criar novo cliente: <strong>'+e+"</strong></a>\n                            </div>\n                        </div>"}},escapeMarkup:function(e){return e}}).on("select2:select",function(e){toastr.success("Cliente adicionado!")}).on("select2:unselect",function(e){toastr.error("Cliente removido!")})}r.on("show.bs.modal",function(e){var t=$(e.currentTarget),a=$(e.relatedTarget),n=a.data("event-id"),r=t.find(".modal-body"),o=a.data("event-name");t.find(".modal-title span").text(o),r.is(":empty")&&$.ajax({url:"/admin/events/"+n+"/edit",type:"GET",success:function(e){r.html($(e)).promise().done(function(){s()})}})}),$(document.body).on("submit","#edit-event-modal form",function(e){e.preventDefault();var t=$(e.currentTarget),a=t.serialize(),n=t.attr("action");$.ajax({url:n,type:"PUT",data:a,success:function(e){e.data;e.success?(toastr.success("Atualizado com sucesso Evento"),r.modal("hide")):toastr.error("Algo deu errado.")}})}),$(window).on("load",function(){var e=$("body");e.hasClass("events")&&s(),console.log("blebleble",e),e.hasClass("clientes")&&(console.log("blabla",e),$("select.select2").select2({placeholder:"Selecione"}))})},function(e,t){$("#edit-event-modal"),$("#customer-create");var a='select.select2[name="event_belongstomany_customer_relationship[]"]';$("#create-customer-modal").on("show.bs.modal",function(e){var t=function(t){t&&(r.find(".modal-title span").text(t),$(e.currentTarget).find('input[name="name"]').val(t))},n=$(e.relatedTarget).data("customer-name"),r=$(e.currentTarget),o=($(e.relatedTarget).data("customer-id"),r.find(".modal-body"));$(a).select2("close"),t(n),o.is(":empty")&&$.ajax({url:"/admin/clientes/create",type:"GET",success:function(e){o.html($(e)).promise().done(function(){t(n)})}})}).on("hide.bs.modal",function(e){$("#create-customer-modal form")[0].reset()}),$(document.body).on("submit","#create-customer-modal form",function(e){e.preventDefault();var t=$(e.currentTarget),n=t.serialize(),r=t.attr("action");$.ajax({url:r,type:"POST",data:n,success:function(e){var t=e.data;if(e.success){toastr.success("Cliente "+t.name+" criado com sucesso!"),$("#create-customer-modal").modal("hide");var n=new Option(t.name,t.id,!0,!0);$(a).append(n).trigger("change")}else if(e.errors){var r=e.errors;for(var o in r)r.hasOwnProperty(o)&&toastr.error(r[o])}else toastr.error("Algo deu errado.")},error:function(e){}})})},function(e,t){}]);